# 7.2 從 Vibe Coding 邁向 TDD 的演進

## 前言

多數開發者在導入 AI 協作時，都會經歷由直覺式操作走向結構化流程的過程。本節以實際案例說明，如何從缺乏規範的「Vibe Coding」逐步演進為架構完整的 AITDD，並整理沿途的重要學習。

## 什麼是 Vibe Coding

### 定義與特徵

**Vibe Coding** 可概括為「憑感覺驅動 AI 寫程式」，主要特徵如下：
- 以直播式對話或即時互動呼叫 AI
- 缺乏清楚的設計或流程規劃
- 傾向直接接受 AI 的輸出
- 測試策略多半事後補強
- 依賴臨場反應與個人經驗

### 初期的吸引力

- **立即開始動手**：想法一出現就能立刻嘗試
- **單一功能極快完成**：小功能常在短時間內完成
- **學習門檻低**：不需特別理解流程
- **互動直覺**：用自然語言即可生成程式碼

### 常用工具演進

**Vibe Coding 時期常見的工具**
- Claude Sonnet 3.5
- DeepSeek R1 蒸餾模型
- 多種 AI 服務交替嘗試

## Vibe Coding 面臨的困境

### 1. 品質高度不穩定

**測試負擔飆升**
- 幾乎所有測試都得人工執行
- 後補自動化測試困難
- 追查錯誤來源耗時

**程式碼難以預測**
- AI 會生成「未被要求」的大量程式碼
- 可能忽略既有程式，重新寫出相似邏輯
- 相同需求產出截然不同的實作

**重複修補頻繁**
- 相同錯誤多次在不同區域出現
- 修正成果難以累積成經驗

### 2. 無法擴充整合

**顯性的「三個功能整合之牆」**
- 單一功能：極快速
- 兩個功能：勉強可控
- 三個功能：整合變得極度困難，人工手寫反而較快

**整合作業的痛點**
- 功能各自生成，整合時缺乏一致性
- 介面定義不一致
- 資料流程斷裂
- 重複程式碼大量出現

### 3. 保養性幾乎不存在

- 命名規則、架構風格各自為政
- 相同功能可能用不同資料結構實作
- 變更影響難以預測
- 錯誤處理、日誌策略沒有共識

## 導入 TDD 後的改善

### 解決的主要問題

1. **階段性開發落實**：以小單位逐步達成完整功能
2. **堅實的測試基礎**：先寫測試再實作，回歸測試隨時可跑
3. **長期維運能力**：程式碼更一致、擴充與維護順手
4. **品質可預測**：流程與標準固定，輸出更加穩定

### 現行流程：Red → Green → Refactor → Validation

- **Red**：撰寫會失敗的測試
- **Green**：以最小實作讓測試通過
- **Refactor**：清理、最佳化程式碼
- **Validation**：進行系統化的品質檢查

### AI 的角色重新定位

- 為各階段設定明確責任
- 針對推測部分提供可視化提示
- 定期檢討並調整提示語與流程

## 推薦的演進路徑

### 階段一：以 Vibe Coding 體驗可能性
- **目標**：理解 AI 協作的能力與限制
- **時間**：約 1–2 週
- **活動**：自由嘗試小功能，熟悉指令與回應
- **收穫**：降低心理障礙，累積互動經驗

### 階段二：正視限制
- **目標**：體會 Vibe Coding 的天花板
- **時間**：約 2–4 週
- **活動**：嘗試整合多個功能、追蹤品質問題
- **收穫**：深刻理解「三功能整合之牆」，意識品質管理的重要性

### 階段三：導入 TDD 建立制度
- **目標**：確立可長期運作的流程
- **時間**：約 4–8 週
- **活動**：
  - 以 TDD 為骨幹建立流程
  - 制定 Red/Green/Refactor/Validation 的作業細節
  - 引入品質檢查與信號燈標註
- **收穫**：流程可複製、品質可預測、團隊可協作

### 階段四：最佳化與擴充
- **目標**：在穩定流程上追求極致效率
- **活動**：
  - 引入輔助審查 AI、觀測工具
  - 建立共用的提示語與文件範本
  - 持續蒐集回饋並更新流程

## 轉型時的關鍵提醒

- **接納 AI 的局限**：讓流程包容推測與錯誤，並提供檢查機制
- **落實測試先行**：將測試視為需求文件的一部分
- **顧及團隊協作**：建立統一的資料夾結構、命名規則與回報格式
- **持續檢討**：定期回顧 AI 表現與流程阻礙，適時調整

透過上述步驟，你可以循序漸進地從 Vibe Coding 過渡到 AITDD，在享受 AI 帶來的高速效率同時，兼顧可預測、可維護的長期品質。
