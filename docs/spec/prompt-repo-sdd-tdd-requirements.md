# prompt-repo-sdd-tdd 要件定義書

## 概要
打造一個專屬的 prompt repo，讓不懂技術的使用者能夠通過自然語言描述需求，AI 協助生成結構化的 SDD (Specification-Driven Development) 和 TDD (Test-Driven Development) 開發流程，並整合 GitHub Issue 進行完整的專案管理。系統支援多輪對話式互動，自動建立分支、PR 和相關文件，所有開發記錄集中管理在 GitHub 上。

## 相關文件
- **使用者故事**：[📖 prompt-repo-sdd-tdd-user-stories.md](prompt-repo-sdd-tdd-user-stories.md)
- **驗收標準**：[✅ prompt-repo-sdd-tdd-acceptance-criteria.md](prompt-repo-sdd-tdd-acceptance-criteria.md)

## 功能需求（EARS 記法）

**信賴等級：** 🔵 確定、🟡 推測、🔴 猜測

### 通常需求
- REQ-001：系統必須支援自然語言需求描述解析，將模糊的業務需求轉換為結構化技術規格 🔵 *訪談確認*
- REQ-002：系統必須提供類似 kairo-requirements 的功能，蒐集與分析現有專案資訊，向使用者進行需求訪談，並使用 EARS 記法整理成含驗收標準的需求定義書 🔵 *kairo-requirements.prompt.md*
- REQ-003：系統必須自動生成完整的 SDD 文件，包含功能需求、非功能需求和架構設計 🔵 *訪談確認*
- REQ-004：系統必須生成對應的 TDD 測試案例，包含單元測試、整合測試和驗收測試 🔵 *訪談確認*
- REQ-005：系統必須根據需求類型（新功能、修改、Bug）自動建立和管理 GitHub Issue，使用適當的標籤和格式，將需求和任務關聯到具體的 Issue 🔵 *訪談確認*
- REQ-006：系統必須支援多輪對話式互動，讓使用者逐步完善需求描述 🔵 *訪談確認*
- REQ-007：系統必須整合 Claude Code、Codex CLI、GitHub Copilot 等開發工具，提供無縫的開發體驗 🔵 *訪談確認*
- REQ-008：系統必須自動管理 Git 分支和 Pull Request，所有開發記錄和變更都記錄在對應分支上 🔵 *訪談確認*

### 條件式需求
- REQ-101：當使用者輸入模糊或不完整的業務需求時，系統必須引導進行多輪對話以釐清技術細節和邊界條件 🔵 *訪談確認*
- REQ-102：當 SDD 和 TDD 生成完成時，系統必須自動建立對應的 GitHub Issue 並標記任務狀態 🔵 *訪談確認*
- REQ-103：當開發任務完成時，系統必須自動建立 Pull Request 並關聯相關的 Issue 🔵 *訪談確認*
- REQ-104：當使用 Claude Code 時，系統必須能夠從生成的 Issue 中提取任務並開始 TDD 開發流程 🔵 *訪談確認*
- REQ-105：當使用 GitHub Copilot 時，系統必須能夠從生成的 Issue 中提取任務並開始 TDD 開發流程 🔵 *訪談確認*
- REQ-106：當使用 Codex CLI 時，系統必須能夠從生成的 Issue 中提取任務並開始 TDD 開發流程 🔵 *訪談確認*
- REQ-107：當使用 Claude Code 時，系統必須支援完整的 TDD 循環（Red-Green-Refactor）並自動生成提交訊息 🔵 *訪談確認*
- REQ-108：當使用 GitHub Copilot 時，系統必須提供即時程式碼補全和測試案例生成建議 🔵 *訪談確認*
- REQ-109：當使用 Codex CLI 時，系統必須支援批次處理多個 Issue 並生成命令列腳本 🔵 *訪談確認*

### 狀態需求
- REQ-201：處於需求蒐集階段時，系統必須提供引導性問題幫助使用者完善描述 🔵 *訪談確認*
- REQ-202：處於開發執行階段時，系統必須從 GitHub Issue 中提取 TDD 任務供 AI 開發者使用 🔵 *訪談確認*
- REQ-203：處於驗收階段時，系統必須根據 TDD 測試案例驗證實作是否符合需求 🔵 *訪談確認*

### 可選需求
- REQ-301：系統可以生成開發進度報表，顯示任務完成率和時間統計 🔵 *訪談確認*
- REQ-302：系統可以生成品質分析報表，包含測試覆蓋率和靜態動態掃描結果 🔵 *訪談確認*
- REQ-303：系統可以生成需求追蹤報表，顯示需求實現狀態和變更歷史 🔵 *訪談確認*
- REQ-304：系統可以提供自動備份功能，保護 prompt 模板和專案資料 🔵 *訪談確認*
- REQ-305：系統可以提供使用者支援系統，包含說明文件和回饋處理 🔵 *訪談確認*

### 限制需求
- REQ-401：系統必須確保所有產出的文件和 Issue 符合 GitHub 標準格式和最佳實務 🔵 *訪談確認*
- REQ-402：系統必須保護使用者輸入的敏感資訊，不得洩露到公開的 GitHub Issue 中 🔵 *訪談確認*
- REQ-403：系統必須支援現有 Tsumiki 架構，可以參考但需打造符合個人開發流程的自定義系統 🔵 *訪談確認*
- REQ-404：系統必須支援 JavaScript/TypeScript、Python 和 Java 三種主要程式語言，提供語言特定的品質分析和測試覆蓋標準 🔵 *訪談確認*
- REQ-405：系統必須限制單次需求描述長度不超過 10000 字元，超過時自動建議分割處理 🔵 *訪談確認*
- REQ-406：系統必須限制並發處理的專案數量不超過 10 個，以確保效能和資源使用合理 🔵 *訪談確認*

## 非功能需求

### 效能
- NFR-001：系統回應時間必須小於 30 秒，即使在處理複雜需求描述時 🔵 *推測基準*
- NFR-002：系統必須支援同時處理多個專案的需求生成而不影響效能 🔵 *推測基準*
- NFR-003：系統記憶體使用量必須控制在 500MB 以內，避免影響開發環境效能 🔵 *推測基準*
- NFR-004：GitHub API 呼叫頻率必須控制在合理範圍內，避免觸發 API 限制 🔵 *推測基準*

### 安全
- NFR-101：系統必須保護使用者資料和專案資訊，符合一般資料保護標準，並根據專案使用的程式語言提供相應的安全實務建議 🔵 *訪談確認*
- NFR-102：系統必須驗證 GitHub API 存取權限，防止未授權的操作 🔵 *推測基準*

### 使用性
- NFR-201：系統必須提供直觀的對話式介面，讓不懂技術的使用者也能輕鬆描述需求 🔵 *訪談確認*
- NFR-202：系統必須提供清晰的狀態指示，讓使用者知道目前處於哪個開發階段 🔵 *訪談確認*

## Edge Case

### 錯誤處理
- EDGE-001：當使用者輸入完全無法解析的需求描述時，系統必須提供具體的範例和引導問題 🔵 *推測基準*
- EDGE-002：當 GitHub API 呼叫失敗時，系統必須提供重試機制和錯誤說明 🔵 *推測基準*
- EDGE-003：當多輪對話超過合理時間限制時，系統必須建議暫停並儲存進度 🔵 *推測基準*

### 邊界值
- EDGE-101：當需求描述極其簡短（少於 10 字）時，系統必須要求更多細節 🔵 *推測基準*
- EDGE-102：當需求描述極其複雜（超過 5000 字）時，系統必須建議分階段處理 🔵 *推測基準*
- EDGE-103：當 GitHub Issue 數量超過專案限制時，系統必須提供分批處理的解決方案 🔵 *推測基準*
- EDGE-104：當多個專案同時要求生成時，系統必須按優先順序排隊處理 🔵 *推測基準*
- EDGE-105：當 GitHub API 權限不足時，系統必須提供清晰的權限設定指引 🔵 *推測基準*
